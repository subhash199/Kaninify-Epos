﻿@if (!IsCollapsed)
{
    <div class="col-md-6 gap-2 d-flex align-items-start ms-2 mb-2">

        <button class="btn btn-light background-colour-light-red d-flex flex-column align-items-center flex-fill">
            <img src="images/icons/liquor.png" class="img-fluid mb-2" />
            <span class="fw-bold">Alcohol</span>
        </button>
        <button class="btn btn-light background-colour-light-red d-flex flex-column align-items-center flex-fill">
            <img src="images/icons/smoking_rooms_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.png" class="img-fluid mb-2" />
            <span class="fw-bold">Tobacco</span>
        </button>
        <button class="btn btn-light background-colour-light-green d-flex flex-column align-items-center flex-fill">
            <img src="images/icons/grocery_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.png" class="img-fluid mb-2" />
            <span class="fw-bold">Grocery</span>
        </button>
        <button @onclick="CollapseDepartmentClick" class="btn btn-light d-flex flex-column align-items-center flex-fill">
            <img src="@State.CollapseButtonImage" class="img-fluid mb-2" />
            <span class="fw-bold">@State.CollapseButtonLabel</span>
        </button>
        @*  <button class="btn btn-light background-colour-light-green d-flex flex-column align-items-center flex-fill">
            <img src="images/icons/nutrition_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.png" class="img-fluid mb-2" />
            <span class="fw-bold">Fruit & Veg</span>
        </button> *@

    </div>
}
@if (IsCollapsed)
{
    <div class="col-md-6 gap-2 d-flex align-items-start ms-2 mb-2">

        <button class="btn btn-light background-colour-light-red d-flex flex-column align-items-center flex-fill">
            <img src="images/icons/casino_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.png" class="img-fluid mb-2" />
            <span class="fw-bold">Lottery</span>
        </button>
        <button class="btn btn-light background-colour-light-red d-flex flex-column align-items-center flex-fill">
            <img src="images/icons/front_hand_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.png" class="img-fluid mb-2" />
            <span class="fw-bold">Scratch</span>
        </button>
        <button class="btn btn-light background-colour-light-green d-flex flex-column align-items-center flex-fill">
            <img src="images/icons/mode_cool_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.png" class="img-fluid mb-2" />
            <span class="fw-bold">Frozen</span>
        </button>
        <button @onclick="CollapseDepartmentClick" class="btn btn-light d-flex flex-column align-items-center flex-fill">
            <img src="@State.CollapseButtonImage" class="img-fluid mb-2" />
            <span class="fw-bold">@State.CollapseButtonLabel</span>
        </button>

    </div>
}
@if ((IsCollapsed && State.ScreenModel.Height < 800) || State.ScreenModel.Height > 800)
{
    <PayoutButtonComponents></PayoutButtonComponents>
}

@if ((!IsCollapsed && State.ScreenModel.Height < 800) || State.ScreenModel.Height > 800)
{
    <CashSuggestButtons OnCashSuggestionClicked="HandleCashSuggestionClick"></CashSuggestButtons>
}

@code {
    [Parameter] public CheckoutState State { get; set; } = new();
    [Parameter] public EventCallback OnDepartmentClick { get; set; }
    [Parameter] public EventCallback<int> OnCashSuggestionClick { get; set; }

    bool IsCollapsed { get; set; } = false;

    private void CollapseDepartmentClick()
    {
        IsCollapsed = !IsCollapsed;
    }

    private async Task HandleCashSuggestionClick(int amount)
    {
        if (OnCashSuggestionClick.HasDelegate)
            await OnCashSuggestionClick.InvokeAsync(amount);
    }
}